<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 6.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link rel="File-List" href="/web/20120208073847/http://www.macbiophotonics.ca/imagej/particle_analysis_files/filelist.xml">

<title>MBF_ImageJ - Particle Analysis</title>
<style>
<!--
div.Section1
	{page:Section1;}
h1
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:21.6pt;
	text-align:justify;
	text-indent:-21.6pt;
	page-break-before:always;
	page-break-after:avoid;
	tab-stops:list 21.6pt;
	font-size:12.0pt;
	font-family:Arial;
	font-variant:small-caps;
	font-style:italic;
	}
h2
	{margin-top:18.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:28.8pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-28.8pt;
	tab-stops:list 28.8pt;
	font-size:10.0pt;
	font-family:Arial;
	}
h3
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:40.5pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-36.0pt;
	page-break-after:avoid;
	tab-stops:list 40.5pt;
	font-size:10.0pt;
	font-family:Arial;
	font-style:italic;
	}
 li.MsoNormal
	{mso-style-parent:"";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Times New Roman"
	}
span.MsoFootnoteReference
	{vertical-align:super}
-->
</style>
<!--[if !mso]>
<style>
v\:*         { behavior: url(#default#VML) }
o\:*         { behavior: url(#default#VML) }
.shape       { behavior: url(#default#VML) }
</style>
<![endif]--><!--[if gte mso 9]>
<xml><o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]-->
</head>

<body topmargin="0" leftmargin="0">



<table border="1" cellspacing="0" width="693" id="AutoNumber1" height="427" style="border-collapse: collapse; border-width: 0" cellpadding="0">
  <tr>
    <td width="211" height="138" style="border-style: none; border-width: medium" valign="bottom" rowspan="2" bgcolor="#960033" background="logo4.jpg" colspan="2">
    <p style="margin-top: 0; margin-bottom: 0">&nbsp;</td>
    <td width="354" height="101" style="border-style: none; border-width: medium" nowrap valign="bottom">
    <p align="center" style="margin-bottom: 12"><i><b>
      <font color="#960033" face="Arial" size="5">Online Manual for the<br>
      <font color="#960033">MBF-ImageJ collection</font></font></b></i></td>
    <td width="280" height="101" style="border-style: none; border-width: medium" nowrap valign="bottom">
    <p style="margin-bottom: 12" align="right">
	<img border="0" src="imagej4microscopy.jpg" width="258" height="54"><b><font face="Comic Sans MS" color="#243A68" size="2"><a target="_blank" href="/web/20120208073847/http://rsb.info.nih.gov/ij/"><br>
    Link to
    ImageJ homepage</a></font></b></td>
  </tr>
  <tr>
    <td width="634" height="35" style="border-style: none; border-width: medium" nowrap valign="bottom" colspan="2" background="grad9.jpg">&nbsp;</td>
  </tr>
  <tr>
    <td width="10" valign="top" nowrap style="border-style: none; border-width: medium" bgcolor="#960033" background="grad10-1.jpg" height="285">


    &nbsp;</td>
    <td width="206" valign="top" nowrap style="border-style: none; border-width: medium" bgcolor="#960033" background="grad10.jpg" height="285">
<h2 style="margin-top: 3; margin-bottom: 6">
<script type='text/javascript'>

//HV Menu v5.411- by Ger Versluis (http://www.burmees.nl/)
//Submitted to Dynamic Drive (http://www.dynamicdrive.com)
//Visit http://www.dynamicdrive.com for this script and more

function Go(){return}

</script>
<script type='text/javascript' src='exmplmenu_var.js'></script>
<script type='text/javascript' src='menu_com.js'></script>
<noscript>Your browser does not support script</h2>
</noscript>
</td>
    <td width="634" height="285" valign="top" style="border-style: none; border-width: medium" nowrap colspan="2">

<div class="Section1" style="width: 606; height: 604">

<div class="Section1" style="width: 606; height: 679">

<h1><a name="_Toc76807467"><span lang="EN-GB">5<span style="font-style: normal; font-variant: normal; font-weight: normal; ">.
</span>Particle Analysis</span></a></h1>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">Particle counting can be done 
automatically if the specimen lends itself to it, i.e. the individual particles 
can touch – but not too much! If automatic particle counting cannot be done, 
ImageJ can facilitate manual counting with the “Point Picker” or “Cell counter” 
plugin. </span></font></p>
<h2 style="margin-top: 3; margin-bottom: 6"><span lang="EN-GB"><a name="particle_auto">5.1<span style="font-style: normal; font-variant: normal; font-weight: normal; "><font size="2">
</font>
</span>Automatic Particle counting</a></span></h2>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">The biggest issue is one referred to as 
“segmentation” which is to distinguish the object from the background. Once the 
objects has been successfully segmented, they can then be analysed.</span></font></p>
<p class="MsoNormal" style="margin-right: -7.5pt; margin-bottom:6; word-spacing:60; margin-top:3"><b>
<span lang="EN-GB" style="font-family: Arial"><font size="2">&nbsp;RAW Threshold Watershed “AnalyzeParticles” Merge</font></span></b></p>
<p style="margin-top: 3; margin-bottom:6"><font size="2">
<img border="0" src="partic1.jpg" width="607" height="116"></font></p>
<h3 style="margin-top: 3; margin-bottom: 6"><a name="threshold"><span lang="EN-GB">5.1.1<span style="font-style: normal; font-variant: normal; font-weight: normal; "><font size="2">
</font>
</span></span><span lang="en-gb">Setting a threshold</span></a></h3>
<p style="margin-bottom: 6; margin-top:3"><font size="2">&nbsp;&nbsp;&nbsp;
</font> <b>
<font face="Arial" size="2">5.1.1.1 Manual thresholding</font></b></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">Automatic 
particle analysis requires the image to be a “binary” image i.e. black or white. 
The software needs to know exactly where the edges are to perform morphology 
measurements. A “threshold” range is set and pixels in the image whose value 
lies in this range are converted to black; pixels with values outside this range 
are converted to white (or vice-versa depending on what the user requests).
</span></font></p>
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse; border-width: 0" bordercolor="#111111" width="100%" id="AutoNumber2">
  <tr>
    <td width="29%" style="border-style: none; border-width: medium">
    <p style="margin-top: 3; margin-bottom: 6"><font size="2">
    <img border="0" src="partic6.jpg" width="224" height="117"></font></td>
    <td width="71%" valign="top" style="border-style: none; border-width: medium">
    <p style="margin-top: 3; margin-bottom: 6">
    <font face="Arial" size="2"><span lang="EN-GB">There are several ways to set 
thresholds. For monochrome images it is most simply done via thee menu command “<i>Image/Adjust/Threshold</i>”. 
While the threshold is being set, the pixels within the threshold range are 
displayed in red. The user then changes then “<i>Apply</i>” the threshold and 
the image will be converted to a binary image. </span></font></td>
  </tr>
</table>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">&nbsp;</p>
<p class="MsoNormal" style="text-align: left; margin-top:3; margin-bottom:6">
<font face="Arial" size="2"><span lang="EN-GB">
<img border="0" src="partic7.jpg" align="right" width="300" height="298">For 
colour images, setting the threshold is a bit more complicated as each of the 
red, green and blue channels require different threshold ranges. The plugin “<i><span style="color: navy">Plugins/Colour 
functions/Threshold Colour</span></i></span><!--[if supportFields]><span lang="EN-GB"> 
XE &quot;<i><span style="color: navy"> Threshold Colour: </span></i>G. Landini.
<a href="/web/20120208073847/http://www.dentistry.bham.ac.uk/landinig/software/software.html" style="color: blue; text-decoration: underline; text-underline: single">
<span style="color: windowtext; text-decoration: none">
/web/20120208073847/http://www.dentistry.bham.ac.uk/landinig/software/software.html</span></a></span>”<![endif]--></font><!--[if supportFields]><![endif]--><font face="Arial" size="2"><i><span lang="EN-GB">”</span></i><span lang="EN-GB"> 
can be used to do this most easily. This opens a fairly complicated and 
extensive control window. The simplest way to perform a colour threshold is to 
use one of the selection tools to select one of the objects of interest, and 
then click the “S<i>ample</i>” button in the “<i>Threshold Colour</i>” control 
window. This should remove the pixels in the image that do not have pixels of 
the same colour as those in the selection. The thresholding can be manually 
tweaked with scroll bars in the histogram panes. It may be easier to 
conceptualise what you are doing at this point by switching the Control window 
from the default Hue, Saturation and Brightness colour model to red, green blue 
model by switching the option buttons at the bottom of the control window. The 
image can be displayed as a binary image with the “Threshold” button, and 
converted to a binary image via the menu command <i>“Image/Type/8-bit</i>” (?!).</span></font></p>
<p style="margin-bottom: 6; margin-top:3"><font size="2">&nbsp;</font><b><font face="Arial" size="2">5.1.1.2 
Automatic thresholding<a name="auto"></a></font></b></p>
<p style="margin-top: 3; margin-bottom:6"><span lang="en-gb"><font face="Arial" size="2">One 
concern with setting a threshold manually is the potential to introduce 
user-bias. There are many algorithms described to automatically calculate the 
threshold. A evaluation of over 40 of these can be found in this paper: Sezgin &amp; 
Sankur. 2004.&nbsp; Survey over image thresholding techniques and quantitative 
performance evaluation. Journal of Electronic Imaging, 2004. (13:146-165).
<font color="#000080"><i>MBF ImageJ</i></font> has several plugins found in the 
menu &quot;<font color="#000080"><i>Plugins/Segmentation</i></font>&quot; for automatic 
calculation of an image threshold. These include Otsu's thresholding, maximum 
entropy threshold, mixture modelling thresholding. There is also k-means 
clustering which can segment an image in to multiple bands and can be used with 
colour images.</font></span></p>
<p style="margin-top: 3; margin-bottom: 6"><font size="2">
<img border="0" src="partic2.jpg" width="552" height="282"></font></p>
<h3 style="margin-top: 3; margin-bottom: 6"><a name="_Toc76807470"><span lang="EN-GB">5.1.2<span style="font-style: normal; font-variant: normal; font-weight: normal; "><font size="2">
</font>
</span>Watershed separation</span></a></h3>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">Objects in a binary image that are 
slightly overlapping may be separated using the menu command “<i>Process/Binary/Watershed”.</i> 
This segmentation process is nicely illustrated with this figure from the ImageJ 
documentation web pages (<a href="/web/20120208073847/http://rsb.info.nih.gov/ij/docs/index.html" style="color: blue; text-decoration: underline; text-underline: single">http://rsb.info.nih.gov/ij/docs/index.html</a>).
</span></font></p>
<p style="margin-top: 3; margin-bottom: 6"><span lang="EN-GB" style="font-size: 10.0pt; font-family: Times New Roman"><!--[if gte vml 1]><v:shapetype id="_x0000_t75"
 coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
 filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_s1025" type="#_x0000_t75" alt="" style='width:485.25pt;
 height:110.25pt'>
 <v:imagedata src="" o:href="/web/20120208073847/http://rsb.info.nih.gov/ij/docs/images/watershed.gif"/>
</v:shape><![endif]--></span></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">The image first needs to be converted to 
binary (set via thresholding). The black pixels are then replaced with grey 
pixels of an intensity proportional to their distance from a white pixel (i.e. 
black pixels close to the edge are light grey, those closer to the ‘middle) are 
nearer black. This is the Euclidian distance map (EDM). From this it calculated 
the centres of the objects the <i>ultimate eroded points</i> (UEPs), i.e. points 
that are equidistance from the edges. These points ere then dilated until the 
meet another black pixel, then a watershed line is drawn.</span></font></p>
<h3 style="margin-top: 3; margin-bottom: 6"><a name="_Toc76807471"><span lang="EN-GB">5.1.3<span style="font-style: normal; font-variant: normal; font-weight: normal; "><font size="2">
</font>
</span>Analyse Particles</span></a></h3>
<p class="MsoNormal" style="margin-right: 12; margin-top:3; margin-bottom:6">
<font face="Arial" size="2"><span lang="EN-GB">Once 
the image has been segmented, the menu command “<i>Analyze/Analyze particles”</i> 
can be used to obtain various information regarding particle size and numbers.
<img border="0" src="partic8.jpg" align="right" width="131" height="192"></span></font></p>
<p class="MsoNormal" style="margin-right: 12; margin-top:3; margin-bottom:6">
<font face="Arial" size="2"><span lang="EN-GB">Set the minimum size and maximum size to 
exclude objects that appear in the binary image that are clearly not objects of 
interest. Select the “Show: Outlines” option to display an image of the detected 
objects. This can then be merged with the original for presentation purposes. 
Invert the outline image and use the menu command “<i>Plugins/Colour 
functions/Colour merge”</i> to add the original and outline image.</span></font></p>
<p class="MsoNormal" style="margin-right: 12; margin-top:3; margin-bottom:6">
<font face="Arial" size="2"><span lang="EN-GB">The particle analysis can be automated 
via plugins or macros once the correct threshold value and particle size range 
has been determined for your objects of interest. See the “<i>Plugins/Particle 
Analysis/ Nucleus counter</i>” plugin and its source code to customise it to 
your images.</span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">&nbsp;</span></font></p>
<h3 style="margin-top: 3; margin-bottom: 6"><a name="NucleusCounter">5.1.4 Nucleus Counter</a></h3>
<p style="margin-top: 3; margin-bottom: 6"><font size="2">This plugin automates many of the steps discussed above. The user can:<br>
1. Enter the size range which should be counted.<img border="0" src="partic9.jpg" align="right" width="224" height="233"><br>
2. Select the automatic thresholding method. This can be either &quot;Current&quot;, &quot;Otsu&quot;, 
Maximum Entropy&quot;, &quot;Mixture Modelling&quot; or k-means&quot; clustering. &quot;Current&quot; uses the 
threshold that has been set manually, see above.<br>
3. Opt to perform a background correction.<br>
4. Opt to perform a &quot;Smooth&quot; filter.<br>
5. Opt to perform a watershed separation.<br>
6. Opt to add the particles to ROI manager<br>
7. Opt for a summary.</font></p>
<p style="margin-top: 3; margin-bottom: 6"><font size="2">Other options can easily be added on request.</font></p>
<p style="margin-top: 3; margin-bottom: 6"><font size="2">The count, area and average size are returned as a text window and the 
outlined particles are overlaid on a duplicate of the original image.</font></p>
<p style="margin-top: 3; margin-bottom: 6"><font size="2">
<img border="0" src="partic5.jpg" width="222" height="196"> </font> </p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">&nbsp;</p>
<h2 style="margin-top: 3; margin-bottom: 6"><span lang="EN-GB"><a name="particle_manual">5.2<span style="font-style: normal; font-variant: normal; font-weight: normal; "><font size="2">
</font>
</span>Manual Counting</a></span></h2>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">You can use the ImageJ toolbar <i>
Crosshair (mark and count)</i> tool to count particles. However, a greater 
degree of control can be accessed with the “Point Picker” or “Cell counter” 
plugin.</span></font></p>
<h3 style="margin-top: 3; margin-bottom: 6"><a name="_Toc76807474"><span lang="EN-GB">5.2.1<span style="font-style: normal; font-variant: normal; font-weight: normal; "><font size="2">
</font>
</span></span></a><span lang="EN-GB">Cell 
Counter<img border="0" src="partic10.jpg" align="right" width="361" height="260"></span></h3>
<p class="MsoNormal" style="margin-right: 12; margin-top:3; margin-bottom:6">
<font face="Arial" size="2"><span lang="EN-GB">When then “<i><span style="color: navy">Plugins/Particle 
counting/Cell Counter</span></i>” plugin</span><!--[if supportFields]><i><span lang="EN-GB" style="color: navy"> 
XE &quot;Cell Counter:</span></i><span lang="EN-GB" style="color: navy"> </span>
<span lang="EN-GB">Kurt De Vos (kd269@columbia.edu) <i>
<span style="color: navy">&quot; </span></i></span><![endif]--></font><!--[if supportFields]>
<![endif]--><font face="Arial" size="2"><span lang="EN-GB">) is run, a new Image window is generated with 
the original image plus four buttons along the bottom (Red type, Green type, 
Blue type and Yellow type). Clicking on a button changes the colour of the 
marking tool. The results table keeps a tally of the number of each of the cell 
types marked. Clicking the Results button will generate a summary of the data.
</span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">&nbsp;</span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">&nbsp;</span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">&nbsp;</span></font></p>
<h3 style="margin-top: 3; margin-bottom: 6"><a name="_Toc76807475"><span lang="EN-GB">5.2.2<span style="font-style: normal; font-variant: normal; font-weight: normal; "><font size="2">
</font>
</span>Point Picker</span></a><span lang="EN-GB"> </span></h3>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">“<i><span style="color: navy">Plugins/Particle 
counting/PointPicker</span></i></span><!--[if supportFields]><i><span lang="EN-GB" style="color: navy"> 
XE &quot;PointPicker: </span></i><span lang="EN-GB">Philippe Thévenaz (philippe.thevenaz@epfl.ch)<i><span style="color: navy"> 
&quot; </span></i></span><![endif]--></font><!--[if supportFields]><![endif]-->
<font face="Arial" size="2"><i>
<span lang="EN-GB">”.</span></i><span lang="EN-GB"> Running this plugin will 
change the ImageJ toolbar to the PointPicker toolbar (below).</span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">&nbsp;<img border="0" src="partic1.gif" width="526" height="123"></span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">&nbsp;</span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">Crosses 
are reversibly overlaid on to the image, incrementally changing colour (this 
differs from the <i>Crosshair </i>tool which irreversible stamps a point in the 
image). With the Point Picker tool, crosses can be moved and deleted. Once 
marking is complete, the cross coordinates can be accessed via the
<img border="0" src="partic10.gif" width="26" height="27"> button.</span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
<font face="Arial" size="2"><span lang="EN-GB">
<img border="0" src="partic11.jpg" align="left" width="77" height="107">This 
produces the “Point List” dialog allowing you to <i>Show</i>, <i>Save</i> or <i>
Open</i> the points’ coordinates. Clicking “<i>Show</i>” displays the 
coordinates in the <i>Results</i> window, where they can be saved or copied to 
the system clipboard. Once finished, you can return to the regular ImageJ 
toolbar by clicking the <img border="0" src="partic12.gif" width="26" height="27">&nbsp;button.</span></font></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
&nbsp;</p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
&nbsp;</p>
<h2 style="margin-top: 3; margin-bottom: 6"><a name="_Toc76807472">5.3 Particle tracking</a></h2>
<p style="margin-top: 3; margin-bottom: 6"><b><font face="Arial" size="2">5.3.1
</font></b><font face="Arial" size="2"><b>Automatic Tracking</b></font></p>
<p style="margin-top: 3; margin-bottom: 6"><b><font face="Arial" size="2">
Particle Tracker</font></b></p>
<p style="margin-top: 3; margin-bottom: 6">&nbsp;</p>
<p style="margin-top: 3; margin-bottom: 6"><b><font face="Arial" size="2">
SpotTracker</font></b></p>
<p style="margin-top: 3; margin-bottom: 6">&nbsp;</p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6"><span lang="en-gb">
<font size="2"><b><span style="font-family: Arial">5.3.2 Manual Tracking</span></b></font></span></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6"><span lang="en-gb">
<font size="2"><b><span style="font-family: Arial">MTrackJ</span></b></font></span></p>
<p class="MsoNormal" style="margin-top: 3; margin-bottom: 6">
&nbsp;</p>

  <p>&nbsp;</div>

  <font face="Arial"><span lang="EN-GB">
</div>
</span></font></td>
  </tr>
</table>


</body>

</html>




<!--
     FILE ARCHIVED ON 7:38:47 Feb 8, 2012 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 16:32:09 Mar 6, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
